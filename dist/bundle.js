(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var _util=require("./util.js"),Util=_interopRequireWildcard(_util);function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e]);return a.default=t,a}var dim=15,num_pattern=1,canvas_width=450,input_2d=[],weight=[];input_2d.push([1,-1,1]),input_2d.push([-1,1,-1]),input_2d.push([1,1,1]);var input_1d=[1,-1,1,-1,1,-1,1,1,1],input_1d2=[-1,1,-1,1,-1,1,-1,-1,-1],batman_pat=(input_1d=[1,1,1,1,1,1,1,1,1],input_1d2=[-1,1,-1,1,-1,1,-1,-1,-1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,1,1,1,1,1,-1,-1,1,1,1,1,1,-1,-1,-1,1,1,1,1,1,1,-1,-1,-1,-1,-1,1,1,1,1,-1,-1,-1,-1,1,1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,1,1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,-1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,1,1,1,1,1,-1,-1,1,1,1,1,1,-1,-1,-1,1,1,1,1,1,1,-1,-1,-1,-1,-1,1,1,1,1,-1,-1,-1,-1,1,1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,1,1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,-1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),pattern_a=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,1,-1,-1,-1,-1,-1,-1,1,1,1,1,-1,-1,1,1,1,-1,-1,-1,-1,-1,-1,1,1,1,1,-1,-1,1,1,1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],pattern_c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],pattern_z=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,1,1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,1,1,1,1,1,1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,1,1,1,1,1,1,-1,1,1,1,-1,-1,-1,-1,1,1,1,1,1,1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,1,1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],pattern_batman=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,-1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],input_draw_1_state_2d=[],input_draw_2_state_2d=[],input_draw_3_state_2d=[],input_draw_res_state_2d=[],input_tensor=[];function reinit_input_draw_state_2d(){for(var t=0;t<dim;++t){for(var a=[],e=0;e<dim;++e)a.push(-1);input_draw_1_state_2d.push(a),input_draw_2_state_2d.push(a),input_draw_3_state_2d.push(a),input_draw_res_state_2d.push(a)}}function calc_weight(t,a,e,n){for(var _=0,r=0;r<e.length;++r)_+=e[r][t]*e[r][a];return _/n}function calc_energy_second_term(t,a,e,n){var _=0;console.log(e);for(var r=0;r<n;++r)for(var d=0;d<e.length&&a!=d;++d)console.log(a,d),_+=e[d][t]*e[d][r]*e[a][r],console.log(e[d][i]),console.log(e[d][r]),console.log(e[a][r]);return _/n}function calc_energy(t,a,e,n,_){for(var r=0,d=0;d<_;++d)r+=n[t][d]*e[a][d];return r}function is_pattern_fixed(t,a,e,n){for(var _=0;_<n;++_){var r=calc_energy(_,t,a,e,n);if(Math.sign(r)!=Math.sign(a[t][_]))return!1}return!0}function update_node_tensor(t,a,e,n,_){for(var r=0,d=0;d<_;++d)r+=n[t][d]*e[a][d];return n[t][a]=Math.sign(r),n}function recalc_all_weights(t,a,e){for(var n=t,_=0;_<e;++_)for(var r=0+_;r<e;++r)r!=_&&(n[_][r]=calc_weight(r,_,a,e));for(_=0;_<e;++_)for(r=0+_;r<e;++r)r!=_&&(n[r][_]=n[_][r]);return n}function train(t,a){console.log(input_draw_1_state_2d);for(var e=Math.pow(t,2),n=[],_=0;_<e;++_){var r=new Float32Array(e);r.fill(0),n.push(r)}return recalc_all_weights(n,a,e)}function process(t,a,e){for(var n=a.length,_=[t],r=0;r<e;++r)!function(t){setTimeout(function(){draw_square_to_canvas(Util.to_2d(_[0]),canvas_res,canvas_width);for(var r=0;r<n;++r)!function(t){setTimeout(function(){var t=Util.get_random_int(n);_=update_node_tensor(0,t,a,_,n)},100*t)}(r);var d=Math.ceil(101*t/e);$("#progress-predict").css("width",d+"%").attr("aria-valuenow",d).text(d+"% Complete")},100*t)}(r);return _[0]}function draw_square_to_canvas(t,a,e){var n=a.getContext("2d"),_=t.length;if(t.length%_!=0)throw"not square";n.canvas.width=e,n.canvas.height=e;for(var r=e,d=parseInt(e/_),s=0;s<e;s+=d)n.moveTo(s,0),n.lineTo(s,r),n.stroke();for(var o=e,i=0;i<e;i+=d)n.moveTo(0,i),n.lineTo(o,i),n.stroke();for(s=0;s<_;++s)for(i=0;i<_;++i)t[s][i]>=.5&&n.fillRect(s*d,i*d,d,d)}function toggle_state(t,a,e){return t[a][e]*=-1,t}function refresh_progress(){$("#progress-predict").css("width","0%").attr("aria-valuenow",0).text("0% Complete")}document.getElementById("button-train").addEventListener("click",function(){var t=Util.to_1d(input_draw_1_state_2d),a=Util.to_1d(input_draw_2_state_2d),e=Util.to_1d(input_draw_3_state_2d);(input_tensor=[]).push(t),input_tensor.push(a),input_tensor.push(e),console.log("HERE"),console.log(input_tensor),weight=train(dim,input_tensor),console.log(weight),$("#weight-update").toast("show")}),document.getElementById("button-process").addEventListener("click",function(){var t=Util.to_1d(input_draw_res_state_2d);console.log("PROCESS"),console.log(weight),console.log(t),t=process(t,weight,100),console.log(t),draw_square_to_canvas(input_draw_res_state_2d=Util.to_2d(t),canvas_res,canvas_width)}),document.getElementById("dropdown-preset-a-1").addEventListener("click",function(){draw_square_to_canvas(input_draw_1_state_2d=Util.to_2d(pattern_a),canvas_1,canvas_width)}),document.getElementById("dropdown-preset-c-1").addEventListener("click",function(){draw_square_to_canvas(input_draw_1_state_2d=Util.to_2d(pattern_c),canvas_1,canvas_width)}),document.getElementById("dropdown-preset-z-1").addEventListener("click",function(){draw_square_to_canvas(input_draw_1_state_2d=Util.to_2d(pattern_z),canvas_1,canvas_width)}),document.getElementById("dropdown-preset-batman-1").addEventListener("click",function(){draw_square_to_canvas(input_draw_1_state_2d=Util.to_2d(pattern_batman),canvas_1,canvas_width)}),document.getElementById("dropdown-preset-random-1").addEventListener("click",function(){var t=Math.pow(dim,2);draw_square_to_canvas(input_draw_1_state_2d=Util.to_2d(Util.generate_random_bipolar_vector(t)),canvas_1,canvas_width)}),document.getElementById("dropdown-preset-a-2").addEventListener("click",function(){draw_square_to_canvas(input_draw_2_state_2d=Util.to_2d(pattern_a),canvas_2,canvas_width)}),document.getElementById("dropdown-preset-c-2").addEventListener("click",function(){draw_square_to_canvas(input_draw_2_state_2d=Util.to_2d(pattern_c),canvas_2,canvas_width)}),document.getElementById("dropdown-preset-z-2").addEventListener("click",function(){draw_square_to_canvas(input_draw_2_state_2d=Util.to_2d(pattern_z),canvas_2,canvas_width)}),document.getElementById("dropdown-preset-batman-2").addEventListener("click",function(){draw_square_to_canvas(input_draw_2_state_2d=Util.to_2d(pattern_batman),canvas_2,canvas_width)}),document.getElementById("dropdown-preset-random-2").addEventListener("click",function(){var t=Math.pow(dim,2);draw_square_to_canvas(input_draw_2_state_2d=Util.to_2d(Util.generate_random_bipolar_vector(t)),canvas_2,canvas_width)}),document.getElementById("dropdown-preset-a-3").addEventListener("click",function(){draw_square_to_canvas(input_draw_3_state_2d=Util.to_2d(pattern_a),canvas_3,canvas_width)}),document.getElementById("dropdown-preset-c-3").addEventListener("click",function(){draw_square_to_canvas(input_draw_3_state_2d=Util.to_2d(pattern_c),canvas_3,canvas_width)}),document.getElementById("dropdown-preset-z-3").addEventListener("click",function(){draw_square_to_canvas(input_draw_3_state_2d=Util.to_2d(pattern_z),canvas_3,canvas_width)}),document.getElementById("dropdown-preset-batman-3").addEventListener("click",function(){draw_square_to_canvas(input_draw_3_state_2d=Util.to_2d(pattern_batman),canvas_3,canvas_width)}),document.getElementById("dropdown-preset-random-3").addEventListener("click",function(){var t=Math.pow(dim,2);draw_square_to_canvas(input_draw_3_state_2d=Util.to_2d(Util.generate_random_bipolar_vector(t)),canvas_3,canvas_width)}),document.getElementById("dropdown-preset-a-noise").addEventListener("click",function(){refresh_progress(),draw_square_to_canvas(input_draw_res_state_2d=Util.to_2d(Util.add_noise_to_vector(pattern_a,.5)),canvas_res,canvas_width)}),document.getElementById("dropdown-preset-c-noise").addEventListener("click",function(){refresh_progress(),draw_square_to_canvas(input_draw_res_state_2d=Util.to_2d(Util.add_noise_to_vector(pattern_c,.5)),canvas_res,canvas_width)}),document.getElementById("dropdown-preset-z-noise").addEventListener("click",function(){refresh_progress(),draw_square_to_canvas(input_draw_res_state_2d=Util.to_2d(Util.add_noise_to_vector(pattern_z,.5)),canvas_res,canvas_width)}),document.getElementById("dropdown-preset-batman-noise").addEventListener("click",function(){refresh_progress(),draw_square_to_canvas(input_draw_res_state_2d=Util.to_2d(Util.add_noise_to_vector(pattern_batman,.5)),canvas_res,canvas_width)});var canvas_1=document.getElementById("canvas-1"),canvas_2=document.getElementById("canvas-2"),canvas_3=document.getElementById("canvas-3"),canvas_res=document.getElementById("canvas-res");canvas_1.addEventListener("click",function(t){var a=canvas_1.getBoundingClientRect(),e=t.clientX-a.left,n=t.clientY-a.top,_=Util.pixel_to_index(e,n,dim,canvas_width);console.log("x: "+_[0]+" y: "+_[1]),input_draw_1_state_2d=toggle_state(input_draw_1_state_2d,_[0],_[1]),console.log(input_draw_1_state_2d),draw_square_to_canvas(input_draw_1_state_2d,canvas_1,canvas_width)},!1),canvas_2.addEventListener("click",function(t){var a=canvas_2.getBoundingClientRect(),e=t.clientX-a.left,n=t.clientY-a.top,_=Util.pixel_to_index(e,n,dim,canvas_width);console.log("x: "+_[0]+" y: "+_[1]),input_draw_2_state_2d=toggle_state(input_draw_2_state_2d,_[0],_[1]),console.log(input_draw_2_state_2d),draw_square_to_canvas(input_draw_2_state_2d,canvas_2,canvas_width)},!1),canvas_3.addEventListener("click",function(t){var a=canvas_3.getBoundingClientRect(),e=t.clientX-a.left,n=t.clientY-a.top,_=Util.pixel_to_index(e,n,dim,canvas_width);console.log("x: "+_[0]+" y: "+_[1]),input_draw_3_state_2d=toggle_state(input_draw_3_state_2d,_[0],_[1]),console.log(input_draw_3_state_2d),draw_square_to_canvas(input_draw_3_state_2d,canvas_3,canvas_width)},!1),canvas_res.addEventListener("click",function(t){refresh_progress();var a=canvas_res.getBoundingClientRect(),e=t.clientX-a.left,n=t.clientY-a.top,_=Util.pixel_to_index(e,n,dim,canvas_width);console.log("x: "+_[0]+" y: "+_[1]),input_draw_res_state_2d=toggle_state(input_draw_res_state_2d,_[0],_[1]),console.log(input_draw_res_state_2d),draw_square_to_canvas(input_draw_res_state_2d,canvas_res,canvas_width)},!1),reinit_input_draw_state_2d(),draw_square_to_canvas(input_draw_1_state_2d,canvas_1,canvas_width),draw_square_to_canvas(input_draw_2_state_2d,canvas_2,canvas_width),draw_square_to_canvas(input_draw_3_state_2d,canvas_3,canvas_width),draw_square_to_canvas(input_draw_res_state_2d,canvas_res,canvas_width);

},{"./util.js":2}],2:[function(require,module,exports){
"use strict";function get_random_int(t){return Math.floor(Math.random()*Math.floor(t))}function to_1d(t){for(var o=t.length,r=[],n=0;n<o;n+=1)for(var e=0;e<o;e+=1)r.push(t[n][e]);return r}function get_random_int_min_max(t,o){return Math.random()*(o-t)+t}function to_2d(t){var o=Math.round(Math.sqrt(t.length));if(t.length%o!=0)throw"not square";for(var r=[],n=0;n<o;++n){for(var e=[],_=0;_<o;++_)e.push(t[n*o+_]);r.push(e)}return r}function pixel_to_index(t,o,r,n){console.log(t,o);var e=n/r;return[Math.floor(t/e),Math.floor(o/e)]}function generate_random_bipolar_vector(t){for(var o=[],r=0;r<t;++r){var n=get_random_int_min_max(-10,10);o.push(Math.sign(n))}return o}function add_noise_to_vector(t,o){for(var r=Math.round(o*t.length),n=0;n<r;++n){t[get_random_int(t.length-1)]*=-1}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.get_random_int=get_random_int,exports.to_1d=to_1d,exports.get_random_int_min_max=get_random_int_min_max,exports.to_2d=to_2d,exports.pixel_to_index=pixel_to_index,exports.generate_random_bipolar_vector=generate_random_bipolar_vector,exports.add_noise_to_vector=add_noise_to_vector;

},{}]},{},[1]);
